#!/bin/sh
# Git pre-commit hook: fail the commit unless all tests pass via `uv run pytest`.
set -eu

# Ensure uv is available
if ! command -v uv >/dev/null 2>&1; then
  echo "pre-commit: 'uv' not found in PATH; install uv to run tests." >&2
  exit 1
fi

echo "pre-commit: running tests (uv run pytest)..."
# Run tests; if they fail, abort the commit
if uv run pytest; then
  echo "pre-commit: tests passed."
else
  echo "pre-commit: tests failed; aborting commit." >&2
  exit 1
fi
