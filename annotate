#!/bin/bash
set -e

# Activate virtual environment
source .venv/bin/activate

# Collect type information by running tests
echo "Collecting type information from tests..."
python -m pyannotate_runtime.collect pytest

# Apply annotations to source files
echo "Applying type annotations to source files..."
pyannotate -w type_info.json

echo "Type annotations applied successfully!"
echo "Review the changes and commit when ready."
